* { box-sizing: border-box; }
html, body { height: 100%; margin:0; padding:0; background:#000; color:#fff; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; }
body { overscroll-behavior: contain; }
.app { height:100%; width:100%; position:relative; }
.stage { position:relative; height:100dvh; width:100%; display:flex; align-items:center; justify-content:center; background:#000; touch-action: pan-y; }
.stage img { max-width:100%; max-height:100%; object-fit:contain; width:auto; height:auto; user-select:none; -webkit-user-drag:none; }
.loading, .error { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,.6); padding:1rem 1.25rem; border-radius:8px; font-size:1rem; }
.hidden { display:none !important; }
.loading { display:flex; flex-direction:column; align-items:center; gap:.6rem; min-width:120px; }
.spinner { width:38px; height:38px; border:4px solid rgba(255,255,255,.25); border-top-color:#fff; border-radius:50%; animation: spin .8s linear infinite; }
.visually-hidden { position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.controls { position:absolute; inset:0; display:flex; flex-direction:column; justify-content:space-between; padding: .5rem .75rem 1rem; background:linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.25) 30%, rgba(0,0,0,.25) 70%, rgba(0,0,0,.75)); animation: fadeIn .25s; }
.top-bar, .nav-bar { display:flex; gap:.4rem; align-items:center; }
.top-bar { flex-wrap:wrap; }
.btn { background:#222; border:1px solid #444; color:#fff; padding:.45rem .7rem; border-radius:6px; font-size:1.05rem; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; min-width:2.4rem; min-height:2.4rem; }
.btn:hover, .btn:focus-visible { background:#333; outline:none; }
@media (max-width: 640px) {
	.btn { min-width:3rem; min-height:3rem; font-size:1.3rem; padding:.6rem .9rem; }
	select, input[type=date] { font-size:1rem; }
	.title { font-size:1.05rem; }
	.top-bar, .nav-bar { gap:.55rem; }
}
select, input[type=date] { background:#111; border:1px solid #444; color:#fff; padding:.4rem .5rem; border-radius:6px; font-size:.9rem; }
.title { flex:1; text-align:center; font-weight:600; font-size:1rem; padding:.25rem .5rem; }
.hint { text-align:center; font-size:.7rem; opacity:.75; margin-top:.35rem; }
.favorites { position:fixed; inset:0; background:#000; display:flex; flex-direction:column; padding: .75rem; z-index:10; }
.favorites-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:.5rem; }
.favorites-list { flex:1; overflow-y:auto; display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:.6rem; }
.favorite-item { position:relative; background:#111; border:1px solid #222; border-radius:8px; padding:.4rem; display:flex; flex-direction:column; gap:.35rem; }
.favorite-item img { width:100%; height:140px; object-fit:contain; background:#000; }
.favorite-meta { font-size:.55rem; line-height:1.1; word-break:break-word; }
.starred { color:#ffdd55; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes spin { to { transform: rotate(360deg); } }

/* Swipe transition */
.slide-out-left { animation: slideOutLeft .25s forwards ease; }
.slide-out-right { animation: slideOutRight .25s forwards ease; }
.slide-in-left { animation: slideInLeft .25s forwards ease; }
.slide-in-right { animation: slideInRight .25s forwards ease; }
@keyframes slideOutLeft { to { transform: translateX(-40%); opacity:0; } }
@keyframes slideOutRight { to { transform: translateX(40%); opacity:0; } }
@keyframes slideInLeft { from { transform: translateX(-40%); opacity:0; } to { transform: translateX(0); opacity:1; } }
@keyframes slideInRight { from { transform: translateX(40%); opacity:0; } to { transform: translateX(0); opacity:1; } }
@media (min-width: 700px) { .controls { padding: .75rem 1rem 1.25rem; } .title { font-size:1.15rem; } }
